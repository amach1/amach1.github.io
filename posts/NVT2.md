---
title: 诺瓦泰718D+北斗星通UM980+2128集成
date: 2024-02-11
tags: [硬件, GPS, RTK, 飞控]
head:
  - - meta
    - name: 诺瓦泰718D+北斗星通UM980+2128g
      content: 诺瓦泰718D+北斗星通UM980+2128g
  - - meta
    - name: 诺瓦泰718D+北斗星通UM980+2128g
      content: 诺瓦泰718D+北斗星通UM980+2128g
---

并没有想象中那么精确。

---

# 前言
::: tip
本文参考信息 [GNSS受信機NovAtel OEM729の導入 - 高橋 賢](https://s-taka.org/novatel-oem729-gnss-receiver/)
:::
苦等的开发板终于到了，下一步就是集成安装调试。 
## 开发板信息
这块开发板支持8至24V的供电，共计引出两路RS-232串口及一个RJ45网口。其中右下角那两根插针是用来设置PPS输出的，插入跳线帽之后就可以在COM1的引脚9输出PPS时钟信号。  

![Caption](/718DK.jpg)    
### 开发板配置  

你需要输入以下命令来配置校正源通道的输出冲突：  
```ini
Interfacemode com2 auto none off
Interfacemode com2 rtcmv3 none off
saveconfig
```  

## 接收机信息
这块板子在厂家发货时就已经附带了外壳以及供电模块，本以为来的是两块718D快乐集成,结果却是各大厂商极端混搭，遂只能参考诺瓦泰官方说明书以及飞控说明书硬着头皮搞。
![Caption](/UM980.jpg)  
外壳内部的板子引出了两路RS232串口以及一个天线+DC输入，配套电源来自那个山寨爆炸多的明纬，并且附带3个状态显示灯（供电、COM1、COM2）。  
绿灯表示串口数据输出＆供电正常,黄灯表示设备有接收到可识别的数据,红色表示设备接收到了不可识别的数据。
### 接收机配置
使用北斗星通的UPrecise与板卡建立通讯，输入version查看板卡型号。  
以下是配置所需命令：  
```ini
Mode base time 60
Rtcm1004 com2 1
Rtcm1006 com2 1
Rtcm1012 com2 1
Rtcm1033 com2 1
Rtcm1124 com2 1
Saveconfig
```  
如此一来，基站就会在COM2输出RTCM校正信息。  
另外，在退出之前记得把COM2的波特率改为718D的对应串口相同的波特率。

## 连接测试
当上述配置步骤全部完成后，就可以通过一根公对公RS232串口线来进行通讯测试了（记得测试23引脚与32引脚之间的连通性）。当设备上电稳定后，使用电脑连接OEM718D的COM1，并打开novatel connect进行状态确认。如果RTK数据正常，配置页面的RTK ROVER后面就会有√并显示为绿色背景（不正常时则为红色），然后就可以查看第一页的定位状态信息了。  
目前看到的定位类型有L1flt、L1int(似乎这样精度最高？)、伪距差分（米级）、窄浮点解（一般在几十厘米）、窄固定解（厘米级）。如果RTK数据更新频率稳定且模式稳定，就可以确认配置没有问题。后面是想上数传电台还是怎么玩就看自己的心情了。  
当然，这次的主要目的是集成到2128，文章后面还有一段描述这一部分工作的说明内容。

## 飞控信息
一块昂贵的飞控，贵就算了还不好用。客户支持也是烂到没边。
### 连接方式
把718D的COM1使用232toTTL引出,TX引脚接TP16,RX引脚接TP22，PPS直接给TP4。  
![Caption](/TP.jpg) 

### 配置内容
VRS中通讯选项卡选择GPS——TPU，RX引脚22 TX引脚16 波特率57600（别忘了配置718）。  
在GPS选项卡中选择诺瓦泰、波特率57600、更新频率为10、PPS引脚 填4（丫丫：昂？）。载波相位设置中记得选择双天线，勾选718D双天线即可，这里的COM口设置不用管（应该是给双诺瓦泰机载端做双天线定向用的）。  
最后，在传感器选项卡中的磁罗盘1选项选择诺瓦泰航向。

### 上机测试
上一步的VRS配置完成后，就可以打开传感器监测并为飞控上电以查看RTK状态了。如果地面站一直提示GPS无效，就要看看是不是718D的波特率没有设置成功了（这东西似乎有BUG，经常会变成其他波特率）。  
如果GPS显示绿色或差分GPS，传感器信息上面应该会显示定位精准度（主要依靠双天线间距确认），顺便看看航向是否准确（并没有想象中那么精确）。  

![Caption](/VRSTEST2.jpg)   
![Caption](/VRSTEST1.jpg)   